function createAnipartiViewer(e,t){createAnipartiViewer.viewerCount=createAnipartiViewer.viewerCount||1;var i="anipartiViewer"+Date.now()+"_"+createAnipartiViewer.viewerCount;document.write('<div id="'+i+'"></div>');var n=document.getElementById(i);return window.makeAnipartiViewer(n,e,t),createAnipartiViewer.viewerCount++,n}!function(window){(function(){"use strict";var e={function:!0,object:!0},B=e[typeof window]&&window||this,i=e[typeof exports]&&exports,t=e[typeof module]&&module&&!module.nodeType&&module,n=i&&t&&"object"==typeof global&&global;!n||n.global!==n&&n.window!==n&&n.self!==n||(B=n);var a=Math.pow(2,53)-1,F=/\bOpera/,o=Object.prototype,r=o.hasOwnProperty,N=o.toString;function s(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function X(e){return e=G(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:s(e)}function Y(e,t){for(var i in e)r.call(e,i)&&t(e[i],i,e)}function j(e){return null==e?s(e):N.call(e).slice(8,-1)}function V(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function H(i,n){var o=null;return function(e,t){var i=-1,n=e?e.length:0;if("number"==typeof n&&-1<n&&n<=a)for(;++i<n;)t(e[i],i);else Y(e,t)}(i,function(e,t){o=n(o,e,t,i)}),o}function G(e){return String(e).replace(/^ +| +$/g,"")}var l=function e(s){var t=B,i=s&&"object"==typeof s&&"String"!=j(s);i&&(t=s,s=null);var n=t.navigator||{},o=n.userAgent||"";s||(s=o);var a,r,l,c,u,d=i?!!n.likeChrome:/\bChrome\b/.test(s)&&!/internal|\n/i.test(N.toString()),h="Object",p=i?h:"ScriptBridgingProxyObject",m=i?h:"Environment",f=i&&t.java?"JavaPackage":j(t.java),g=i?h:"RuntimeObject",x=/\bJava/.test(f)&&t.java,v=x&&j(t.environment)==m,b=x?"a":"α",S=x?"b":"β",w=t.document||{},y=t.operamini||t.opera,A=F.test(A=i&&y?y["[[Class]]"]:j(y))?A:y=null,T=s,C=[],_=null,k=s==o,E=k&&y&&"function"==typeof y.version&&y.version(),M=H([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||V(t))+"\\b","i").exec(s)&&(t.label||t)}),O=H(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||V(t))+"\\b","i").exec(s)&&(t.label||t)}),I=L([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),P=H({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,t,i){return e||(t[I]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(I)]||RegExp("\\b"+V(i)+"(?:\\b|\\w*\\d)","i").exec(s))&&i}),R=H(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var i,n,o,a,r=t.pattern||V(t);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(s))&&(i=e,n=r,o=t.label||t,a={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},n&&o&&/^Win/i.test(i)&&!/^Windows Phone /i.test(i)&&(a=a[/[\d.]+$/.exec(i)])&&(i="Windows "+a),i=String(i),n&&o&&(i=i.replace(RegExp(n,"i"),o)),e=i=X(i.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e});function L(e){return H(e,function(e,t){var i=t.pattern||V(t);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(s)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(s)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(s))&&((e=String(t.label&&!RegExp(i,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=X(e[0].replace(RegExp(i,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}if(M&&(M=[M]),P&&!I&&(I=L([P])),(a=/\bGoogle TV\b/.exec(I))&&(I=a[0]),/\bSimulator\b/i.test(s)&&(I=(I?I+" ":"")+"Simulator"),"Opera Mini"==O&&/\bOPiOS\b/.test(s)&&C.push("running in Turbo/Uncompressed mode"),"IE"==O&&/\blike iPhone OS\b/.test(s)?(P=(a=e(s.replace(/like iPhone OS/,""))).manufacturer,I=a.product):/^iP/.test(I)?(O||(O="Safari"),R="iOS"+((a=/ OS ([\d_]+)/i.exec(s))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=O||/buntu/i.test(R)?P&&"Google"!=P&&(/Chrome/.test(O)&&!/\bMobile Safari\b/i.test(s)||/\bVita\b/.test(I))||/\bAndroid\b/.test(R)&&/^Chrome/.test(O)&&/\bVersion\//i.test(s)?(O="Android Browser",R=/\bAndroid\b/.test(R)?R:"Android"):"Silk"==O?(/\bMobi/i.test(s)||(R="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(s)&&C.unshift("accelerated")):"PaleMoon"==O&&(a=/\bFirefox\/([\d.]+)\b/.exec(s))?C.push("identifying as Firefox "+a[1]):"Firefox"==O&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(s))?(R||(R="Firefox OS"),I||(I=a[1])):!O||(a=!/\bMinefield\b/i.test(s)&&/\b(?:Firefox|Safari)\b/.exec(O))?(O&&!I&&/[\/,]|^[^(]+?\)/.test(s.slice(s.indexOf(a+"/")+8))&&(O=null),(a=I||P||R)&&(I||P||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(R))&&(O=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(R)?R:a)+" Browser")):"Electron"==O&&(a=(/\bChrome\/([\d.]+)\b/.exec(s)||0)[1])&&C.push("Chromium "+a):R="Kubuntu",E||(E=H(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",V(O),"(?:Firefox|Minefield|NetFront)"],function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(s)||0)[1]||null})),(a=("iCab"==M&&3<parseFloat(E)?"WebKit":/\bOpera\b/.test(O)&&(/\bOPR\b/.test(s)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(s)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(s)&&("Mac OS"==R?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(O)&&"NetFront")&&(M=[a]),"IE"==O&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(s)||0)[1])?(O+=" Mobile",R="Windows Phone "+(/\+$/.test(a)?a:a+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(s)?(O="IE Mobile",R="Windows Phone 8.x",C.unshift("desktop mode"),E||(E=(/\brv:([\d.]+)/.exec(s)||0)[1])):"IE"!=O&&"Trident"==M&&(a=/\brv:([\d.]+)/.exec(s))&&(O&&C.push("identifying as "+O+(E?" "+E:"")),O="IE",E=a[1]),k){if(c="global",u=null!=(l=t)?typeof l[c]:"number",/^(?:boolean|number|string|undefined)$/.test(u)||"object"==u&&!l[c])j(a=t.runtime)==p?(O="Adobe AIR",R=a.flash.system.Capabilities.os):j(a=t.phantom)==g?(O="PhantomJS",E=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof w.documentMode&&(a=/\bTrident\/(\d+)/i.exec(s))?(E=[E,w.documentMode],(a=+a[1]+4)!=E[1]&&(C.push("IE "+E[1]+" mode"),M&&(M[1]=""),E[1]=a),E="IE"==O?String(E[1].toFixed(1)):E[0]):"number"==typeof w.documentMode&&/^(?:Chrome|Firefox)\b/.test(O)&&(C.push("masking as "+O+" "+E),O="IE",E="11.0",M=["Trident"],R="Windows");else if(x&&(T=(a=x.lang.System).getProperty("os.arch"),R=R||a.getProperty("os.name")+" "+a.getProperty("os.version")),v){try{E=t.require("ringo/engine").version.join("."),O="RingoJS"}catch(e){(a=t.system)&&a.global.system==t.system&&(O="Narwhal",R||(R=a[0].os||null))}O||(O="Rhino")}else"object"==typeof t.process&&!t.process.browser&&(a=t.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(C.push("Node "+a.versions.node),O="Electron",E=a.versions.electron):"string"==typeof a.versions.nw&&(C.push("Chromium "+E,"Node "+a.versions.node),O="NW.js",E=a.versions.nw)),O||(O="Node.js",T=a.arch,R=a.platform,E=(E=/[\d.]+/.exec(a.version))?E[0]:null));R=R&&X(R)}if(E&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(E)||/(?:alpha|beta)(?: ?\d)?/i.exec(s+";"+(k&&n.appMinorVersion))||/\bMinefield\b/i.test(s)&&"a")&&(_=/b/i.test(a)?"beta":"alpha",E=E.replace(RegExp(a+"\\+?$"),"")+("beta"==_?S:b)+(/\d+\+?/.exec(a)||"")),"Fennec"==O||"Firefox"==O&&/\b(?:Android|Firefox OS)\b/.test(R))O="Firefox Mobile";else if("Maxthon"==O&&E)E=E.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(I))"Xbox 360"==I&&(R=null),"Xbox 360"==I&&/\bIEMobile\b/.test(s)&&C.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(O)&&(!O||I||/Browser|Mobi/.test(O))||"Windows CE"!=R&&!/Mobi/i.test(s))if("IE"==O&&k)try{null===t.external&&C.unshift("platform preview")}catch(e){C.unshift("embedded")}else(/\bBlackBerry\b/.test(I)||/\bBB10\b/.test(s))&&(a=(RegExp(I.replace(/ +/g," *")+"/([.\\d]+)","i").exec(s)||0)[1]||E)?(R=((a=[a,/BB10/.test(s)])[1]?(I=null,P="BlackBerry"):"Device Software")+" "+a[0],E=null):this!=Y&&"Wii"!=I&&(k&&y||/Opera/.test(O)&&/\b(?:MSIE|Firefox)\b/i.test(s)||"Firefox"==O&&/\bOS X (?:\d+\.){2,}/.test(R)||"IE"==O&&(R&&!/^Win/.test(R)&&5.5<E||/\bWindows XP\b/.test(R)&&8<E||8==E&&!/\bTrident\b/.test(s)))&&!F.test(a=e.call(Y,s.replace(F,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),F.test(O)?(/\bIE\b/.test(a)&&"Mac OS"==R&&(R=null),a="identify"+a):(a="mask"+a,O=A?X(A.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(R=null),k||(E=null)),M=["Presto"],C.push(a));else O+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(s)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==O&&"+"==a[1].slice(-1)?(O="WebKit Nightly",_="alpha",E=a[1].slice(0,-1)):E!=a[1]&&E!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(s)||0)[1])||(E=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(s)||0)[1],537.36==a[0]&&537.36==a[2]&&28<=parseFloat(a[1])&&"WebKit"==M&&(M=["Blink"]),k&&(d||a[1])?(M&&(M[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),M&&(M[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==O&&(!E||45<parseInt(E))&&(E=a)),"Opera"==O&&(a=/\bzbov|zvav$/.exec(R))?(O+=" ",C.unshift("desktop mode"),"zvav"==a?(O+="Mini",E=null):O+="Mobile",R=R.replace(RegExp(" *"+a+"$"),"")):"Safari"==O&&/\bChrome\b/.exec(M&&M[1])&&(C.unshift("desktop mode"),O="Chrome Mobile",E=null,/\bOS X\b/.test(R)?(P="Apple",R="iOS 4.3+"):R=null),E&&0==E.indexOf(a=/[\d.]+$/.exec(R))&&-1<s.indexOf("/"+a+"-")&&(R=G(R.replace(a,""))),M&&!/\b(?:Avant|Nook)\b/.test(O)&&(/Browser|Lunascape|Maxthon/.test(O)||"Safari"!=O&&/^iOS/.test(R)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(O)&&M[1])&&(a=M[M.length-1])&&C.push(a),C.length&&(C=["("+C.join("; ")+")"]),P&&I&&I.indexOf(P)<0&&C.push("on "+P),I&&C.push((/^on /.test(C[C.length-1])?"":"on ")+I),R&&(a=/ ([\d.+]+)$/.exec(R),r=a&&"/"==R.charAt(R.length-a[0].length-1),R={architecture:32,family:a&&!r?R.replace(a[0],""):R,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!r?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(T))&&!/\bi686\b/i.test(T)?(R&&(R.architecture=64,R.family=R.family.replace(RegExp(" *"+a),"")),O&&(/\bWOW64\b/i.test(s)||k&&/\w(?:86|32)$/.test(n.cpuClass||n.platform)&&!/\bWin64; x64\b/i.test(s))&&C.unshift("32-bit")):R&&/^OS X/.test(R.family)&&"Chrome"==O&&39<=parseFloat(E)&&(R.architecture=64),s||(s=null);var D={};return D.description=s,D.layout=M&&M[0],D.manufacturer=P,D.name=O,D.prerelease=_,D.product=I,D.ua=s,D.version=O&&E,D.os=R||{architecture:null,family:null,version:null,toString:function(){return"null"}},D.parse=e,D.toString=function(){return this.description||""},D.version&&C.unshift(E),D.name&&C.unshift(O),R&&O&&(R!=String(R).split(" ")[0]||R!=O.split(" ")[0]&&!I)&&C.push(I?"("+R+")":"on "+R),C.length&&(D.description=C.join(" ")),D}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(B.platform=l,define(function(){return l})):i&&t?Y(l,function(e,t){i[t]=e}):B.platform=l}).call(this);var LZString=function(){function i(e,t){if(!a[e]){a[e]={};for(var i=0;i<e.length;i++)a[e][e.charAt(i)]=i}return a[e][t]}var x=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},r={compressToBase64:function(e){if(null==e)return"";var t=r._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(e){return i(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":r._compress(e,15,function(e){return x(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:r._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=r.compress(e),i=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var a=t.charCodeAt(n);i[2*n]=a>>>8,i[2*n+1]=a%256}return i},decompressFromUint8Array:function(e){if(null==e)return r.decompress(e);for(var t=new Array(e.length/2),i=0,n=t.length;i<n;i++)t[i]=256*e[2*i]+e[2*i+1];var o=[];return t.forEach(function(e){o.push(x(e))}),r.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(e){return i(o,t.charAt(e))}))},compress:function(e){return r._compress(e,16,function(e){return x(e)})},_compress:function(e,t,i){if(null==e)return"";var n,o,a,r={},s={},l="",c="",u="",d=2,h=3,p=2,m=[],f=0,g=0;for(a=0;a<e.length;a+=1)if(l=e.charAt(a),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=h++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(r,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<p;n++)f<<=1,g==t-1?(g=0,m.push(i(f)),f=0):g++;for(o=u.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1}else{for(o=1,n=0;n<p;n++)f=f<<1|o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o=0;for(o=u.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[u]}else for(o=r[u],n=0;n<p;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1;0==--d&&(d=Math.pow(2,p),p++),r[c]=h++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<p;n++)f<<=1,g==t-1?(g=0,m.push(i(f)),f=0):g++;for(o=u.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1}else{for(o=1,n=0;n<p;n++)f=f<<1|o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o=0;for(o=u.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[u]}else for(o=r[u],n=0;n<p;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(o=2,n=0;n<p;n++)f=f<<1|1&o,g==t-1?(g=0,m.push(i(f)),f=0):g++,o>>=1;for(;;){if(f<<=1,g==t-1){m.push(i(f));break}g++}return m.join("")},decompress:function(t){return null==t?"":""==t?null:r._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,i){var n,o,a,r,s,l,c,u=[],d=4,h=4,p=3,m="",f=[],g={val:i(0),position:t,index:1};for(n=0;n<3;n+=1)u[n]=n;for(a=0,s=Math.pow(2,2),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;switch(a){case 0:for(a=0,s=Math.pow(2,8),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;c=x(a);break;case 1:for(a=0,s=Math.pow(2,16),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;c=x(a);break;case 2:return""}for(o=u[3]=c,f.push(c);;){if(g.index>e)return"";for(a=0,s=Math.pow(2,p),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;switch(c=a){case 0:for(a=0,s=Math.pow(2,8),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;u[h++]=x(a),c=h-1,d--;break;case 1:for(a=0,s=Math.pow(2,16),l=1;l!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),a|=(0<r?1:0)*l,l<<=1;u[h++]=x(a),c=h-1,d--;break;case 2:return f.join("")}if(0==d&&(d=Math.pow(2,p),p++),u[c])m=u[c];else{if(c!==h)return null;m=o+o.charAt(0)}f.push(m),u[h++]=o+m.charAt(0),o=m,0==--d&&(d=Math.pow(2,p),p++)}}};return r}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);var eventSystem=function(){return function(e,t){if(e){if(this.eventsListers||(this.eventsListers={}),t&&"function"==typeof t)this.eventsListers[e]||(this.eventsListers[e]=[]),this.eventsListers[e].push(t);else if(this.eventsListers[e])for(i=0;i<this.eventsListers[e].length;i++)this.eventsListers[e][i].apply(this,t)}else{for(var i in this.eventsListers)this.eventsListers[i]=[];this.eventsListers={}}}},eachItem=function(e,t,i,n){var o={arr:e,index:n=n||0,invoke:t,done:i,callNext:function(){this.index<this.arr.length?(this.index++,this.invoke(this.arr[this.index-1],this)):this.done&&this.done()}};o.call=o.callNext,o.callNext()},_extend=function(t,i){for(e in i)t[e]=i[e]};window.aniparti_LZString=LZString;var DEG_TO_RAD_HELP=.017453292519943295,_360DEGRAD=360*DEG_TO_RAD_HELP,_1DEGRAD=1*DEG_TO_RAD_HELP,RAD_TO_DEG_HELP=57.29577951308232,aniparti={components:{processSchema:function(e,t){return t.__fieldUpdated=t.fieldUpdated,t.fieldUpdated=function(e){this.hostObject.component=e.att.object,e.att.modified&&e.att.modified(this.hostObject,e.att.object),this.__fieldUpdated&&this.__fieldUpdated(e)},e=(t.hostObject=e).component,ui.processSchema(t,e),t},registerComponent:function(e){return e.getSchema=function(){},(aniparti.components[e.uuid]=e).extend=function(e){_extend(this,e)},e},define:function(e){return aniparti.components[e.uuid]?e:this.registerComponent(e)}}},createDiv=function(e){e=e||"div";var t=document.createElement(e);return t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.classList.add("aniparti-viewer-div"),t.getWidth=function(){return parseInt(this.style.width)},t.visible=!0,t.rotation=0,t.px=0,t.py=0,t.scaleX=1,t.scaleY=1,t.anchorX=1,t.anchorY=1,t.setVisible=function(e){this.visibleChange=e!=this.visible,this.visible=e},t.getHeight=function(){return parseInt(this.style.height)},t.setWidth=function(e){this.style.width=e+"px"},t.setHeight=function(e){this.style.height=e+"px"},t.setPos=function(e,t){this.style.left=parseInt(e)+"px",this.style.top=parseInt(t)+"px"},t.setSize=function(e,t){this.style.width=parseInt(e)+"px",this.style.height=parseInt(t)+"px"},t.addChild=function(e){this.appendChild(e)},t.transform=function(){var e="";return this.transformChanged=this.px!=this.l_px||this.py!=this.l_py||this.scaleX!=this.l_scaleX||this.scaleY!=this.l_scaleY||this.rotation!=this.l_rotation,this.transformChanged&&(e="translateX("+(this.px-this.width*this.anchorX)+"px) translateY("+(this.py-this.height*this.anchorY)+"px) rotate("+this.rotation+"rad) scaleX("+this.scaleX+") scaleY("+this.scaleY+")   ",this.l_px=this.px,this.l_py=this.py,this.l_scaleX=this._scaleX,this.l_scaleY=this._scaleY,this.l_rotation=this.rotation,this.style.transform=this.style.webkitTransform=e),e},t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.remove=function(){this.parentNode.removeChild(this)},t.onTouch=function(e){this.touchmove=function(e){this.removeEventListener("touchend",this.touchend),this.removeEventListener("touchmove",this.touchmove)},this.touchstart=function(e){this.addEventListener("touchend",this.touchend),this.addEventListener("touchmove",this.touchmove)},this.touchend=function(e){this.removeEventListener("touchend",this.touchend),this.touchcallback(e)},this.touchcallback||this.addEventListener("touchstart",this.touchstart),this.touchcallback=e,this.onclick=e},t},easingFn={dummy:function(e){return e},linear:function(e){return e},easingSinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},easingSinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},easingSinusoidalInOut:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easingQuadraticIn:function(e){return e*e},easingQuadraticOut:function(e){return e*(2-e)},easingQuadraticInOut:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easingCubicIn:function(e){return e*e*e},easingCubicOut:function(e){return--e*e*e+1},easingCubicInOut:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easingQuarticIn:function(e){return e*e*e*e},easingQuarticOut:function(e){return 1- --e*e*e*e},easingQuarticInOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easingQuinticIn:function(e){return e*e*e*e*e},easingQuinticOut:function(e){return 1+--e*e*e*e*e},easingQuinticInOut:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easingCircularIn:function(e){return-(Math.sqrt(1-e*e)-1)},easingCircularOut:function(e){return Math.sqrt(1-(e-=1)*e)},easingCircularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easingExponentialIn:function(e){return Math.pow(2,10*(e-1))-.001},easingExponentialOut:function(e){return 1-Math.pow(2,-10*e)},easingExponentialInOut:function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))},easingBackIn:function(e){return e*e*(2.70158*e-1.70158)},easingBackOut:function(e){return--e*e*(2.70158*e+1.70158)+1},easingBackInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},easingElasticIn:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/Math.PI*2,-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*Math.PI*2/.4))},easingElasticOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/Math.PI*2,i*Math.pow(2,-10*e)*Math.sin((e-t)*Math.PI*2/.4)+1)},easingElasticInOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/Math.PI*2,(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*Math.PI*2/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*Math.PI*2/.4)*.5+1)},easingBounceIn:function(e){return 1-easingFn.easingBounceOut(1-e)},easingBounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easingBounceInOut:function(e){return e<.5?.5*easingFn.easingBounceIn(2*e):.5*easingFn.easingBounceOut(2*e-1)+.5}},style=document.createElement("style");style.type="text/css";var css=".aniparti-viewer-div {pointer-events:none;user-select:none;} .aniparti-viewer-stage{overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling: touch;pointer-events:fill} .aniparti-viewer-div.touchable {pointer-events:fill}";css+=".spinner-overlay{position:absolute;left:0;top:0;right:0;bottom:0;background-color:rgba(10,10,10,0.2);} .spinner {left:50%;top:50%;margin-left:-20px;margin-top:-20px;position:absolute; width: 40px;height: 40px;background-color: #333;border-radius: 100%;-webkit-animation: sk-scaleout 1.0s infinite ease-in-out;animation: sk-scaleout 2.0s infinite ease-in-out;}@-webkit-keyframes sk-scaleout {0% { -webkit-transform: scale(0) }100% {-webkit-transform: scale(1.0);opacity: 0;}} @keyframes sk-scaleout {0% {-webkit-transform: scale(0);transform: scale(0);} 100% { -webkit-transform: scale(1.0);transform: scale(1.0);opacity: 0;}}",css+=" ::-webkit-scrollbar {width: 2px; height: 2px;margin: 0;padding: 0;}   ::-webkit-scrollbar-track {background: rgba(0, 0, 0, 0.0);}::-webkit-scrollbar-thumb {background: rgba(0, 0, 0, 0.1);} .loading-indicator{border:solid 2px white;} .loading-indicator >span{color: white;position: absolute;left: 0;right: 0;top: 50%;margin-top: -7px;text-align: center;font-size: 80%;}",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css));var head=document.head||document.getElementsByTagName("head")[0];head.appendChild(style),window.aniparti_showProcessing=function(e){(e=e||document.body)._showProcessing||(e._showProcessing=document.createElement("div"),e._showProcessing.innerHTML='<div class="spinner"></div>',e._showProcessing.classList.add("spinner-overlay"),e._showProcessing.classList.add("fuckme")),e.appendChild(e._showProcessing)},window.aniparti_hideProcessing=function(e){(e=e||document.body)._showProcessing&&(e.removeChild(e._showProcessing),delete e._showProcessing)},window.aniparti_loadLib=function(e){_extend(aniparti,e)};var utils={dateInteger:function(){return Date.now()},guidCounter:0,guidIndex:function(){return this.guidCounter++,this.dateInteger()+this.guidCounter},guid:function(){return this.guidCounter++,(this.dateInteger()+this.guidCounter).toString(36)},fixTouchPos:function(e){return e.xx=e.offsetX||e.clientX,e.yy=e.offsetY||e.clientY,e.x=e.xx,e.y=e.yy,e},fastArray:function(){var e=new Array;return e.arrLength=0,e.pushItem=function(e){this[this.arrLength++]=e},e.removeItem=function(e){for(;e<this.arrLength;)this[e]=this[e+1],e++;this.arrLength--},e},fastList:function(){return this.head=null,this.linksCount=0,this.addLink=function(e){return null==e&&(e={next:null}),null==this.head||(e.next=this.head),this.head=e,this.linksCount++,e.uuid=utils.guidIndex(),e},this.pop=function(){var e=this.head;return null!=e&&(this.head=this.head.next,this.linksCount--),e},this.deleteLink=function(e,t){return null!=t?t.next=e.next:this.head=e.next,e.next=null,this.linksCount--,e},this.clear=function(){this.head=null,this.linksCount=0,delete this.head},this.forEach=function(e){for(var t=this.head,i=null;null!=t;)e(t,i),t=(i=t).next},this}},FRAME={TRANS_POS_X:0,TRANS_POS_Y:0,TRANS_SCALE_X:0,TRANS_SCALE_Y:0,TRANS_ROTATE:0,TRANS_ROTATE_PATH:0,TRANS_LOOK_X:0,TRANS_LOOK_Y:0,TRANS_ZOOM:0,TRANS_DEPTH:0,TRANS_OPACITY:0,TRANS_BLUR:0,TRANS_TINT:0,TRANS_RELATIVE:0,TRANS_LOOK:0,TRANS_POS:0,TRANS_SCALE:0,getMask:function(e){var t=0;return e.transformPosX&&(t|=FRAME.TRANS_POS_X),e.transformPosY&&(t|=FRAME.TRANS_POS_Y),e.transformScaleX&&(t|=FRAME.TRANS_SCALE_X),e.transformScaleY&&(t|=FRAME.TRANS_SCALE_Y),e.transformRotation&&(t|=FRAME.TRANS_ROTATE),e.transformRotationWithPath&&(t|=FRAME.TRANS_ROTATE_PATH),e.transformBlur&&(t|=FRAME.TRANS_BLUR),e.transformOpacity&&(t|=FRAME.TRANS_OPACITY),e.transformLookX&&(t|=FRAME.TRANS_LOOK_X),e.transformLookY&&(t|=FRAME.TRANS_LOOK_Y),e.transformZoom&&(t|=FRAME.TRANS_ZOOM),e.transformDepth&&(t|=FRAME.TRANS_DEPTH),t}},setBit=function(e,t){for(var i in t=t||1,e)"getMask"!=i&&(e[i]=t,t*=2)};function anpartiViewerTimeline(e){return this.owner=e,this.timeBlocks=new utils.fastList,this.clockTime=0,this.isPaused=!1,this.isStarted=!1,e.freeTimeBlocks=e.freeTimeBlocks||new utils.fastList,this.newBlock=function(e,t,i){var n=this.timeBlocks.addLink(this.owner.freeTimeBlocks.pop());return n.data=n.data||{},n.data.type=e,n.data.consumer=t,n.data.target=i,n.data},this.animate=function(e){if(!this.isPaused){this.isStarted||(e=0,this.isStarted=!0);var t,i,n,o,a,r,s,l,c,u,d,h,p,m,f,g,x,v,b,S,w,y,A,T,C,_,k,E,M,O,I,P,R=this.clockTime,L=0,D=0,B=!1;utils.guidIndex();for(i=this.timeBlocks.head;null!=i;i=(t=i).next){if(o=i.data,i.next&&i.uuid==i.next.uuid)return void(i.next=null);if(9999!=o.type)if(-1e3!=o.type){if(1!=o.type)if(2!=o.type)if(o.consumer.active)if(0<(r=(a=o.consumer.time)-R))t=i;else{if(l=o.consumer.timeWidth,200!=o.type&&300!=o.type||(l=(u=o.consumer.effect).timeWidth*o.consumer.effectSpeed),c=l*o.consumer.repeat,r<-l){if(s=!0,r<=-c){if(0!=o.consumer.hasEnded)continue;if(o.consumer.hasEnded=1,o.consumer.hasStarted=0,1==o.consumer.handleEnding)continue;R=a+c,s=!1}s&&(a=o.consumer.time+Math.abs(parseInt(r/l)*l))}if(100==o.type)o.target.timeTick(o.consumer,e,R,a,l);else if(150==o.type)I=o.target,O=o.consumer.mask,D=o.consumer.easing((R-a)/l),O&FRAME.TRANS_ROTATE&&(S=o.consumer.rotation1+(o.consumer.rotation2-o.consumer.rotation1)*D,I.rotation=S*DEG_TO_RAD_HELP),O&FRAME.TRANS_POS?(I.px=o.consumer.x1+(o.consumer.x2-o.consumer.x1)*D,I.py=o.consumer.y1+(o.consumer.y2-o.consumer.y1)*D):O&FRAME.TRANS_SCALE?(I.scaleX=o.consumer.x1+(o.consumer.x2-o.consumer.x1)*D,I.scaleY=o.consumer.y1+(o.consumer.y2-o.consumer.y1)*D):O&FRAME.TRANS_LOOK&&(I.lookX=o.consumer.x1+(o.consumer.x2-o.consumer.x1)*D,I.lookY=o.consumer.y1+(o.consumer.y2-o.consumer.y1)*D),O&FRAME.TRANS_ZOOM&&(I.zoomValue=o.consumer.zoom1+(o.consumer.zoom2-o.consumer.zoom1)*D),O&FRAME.TRANS_DEPTH&&(I.depth=o.consumer.depth1+(o.consumer.depth2-o.consumer.depth1)*D);else if(200==o.type||300==o.type){for(O=o.consumer.mask,A=w=y=0;A<u.frames.length;A++)d=u.frames[A].time*o.consumer.effectSpeed+a,0<A&&y<=R&&R<=d&&(w=A),y=d;0<w&&(B=!1,h=u.frames[w-1],p=u.frames[w],L=1-(D=(R-(d=h.time*o.consumer.effectSpeed+a))/(p.time*o.consumer.effectSpeed+a-d)),200==o.type?o.consumer.process(D,L,h,p,R):(P=p.easing||{},E=(I=o.target).px,M=I.py,m=h.x,f=h.y,g=p.x,x=p.y,(O&FRAME.TRANS_POS_X||O&FRAME.TRANS_ROTATE_PATH)&&(T=g+p.cx1,_=g+p.cx2,"linear"!=P.transformPosX?v=m+(g-m)*(D=easingFn[P.transformPosX](D)):(v=L*L*L*m+L*L*3*D*T+3*L*(D*D)*_+D*D*D*g,I.ox=v),O&FRAME.TRANS_RELATIVE?I.px+=v:I.px=o.consumer._x+v),(O&FRAME.TRANS_POS_Y||O&FRAME.TRANS_ROTATE_PATH)&&(C=x+p.cy1,k=x+p.cy2,"linear"!=P.transformPosY?b=f+(x-f)*(D=easingFn[P.transformPosY](D)):(b=L*L*L*f+L*L*3*D*C+3*L*(D*D)*k+D*D*D*x,I.oy=b),O&FRAME.TRANS_RELATIVE?I.py+=b:I.py=o.consumer._y+b),O&FRAME.TRANS_ROTATE_PATH?I.rotation=Math.atan2(b-M,v-E)+o.consumer._a:O&FRAME.TRANS_ROTATE&&(D=easingFn[P.transformRotation](D),S=h.rotation+(p.rotation-h.rotation)*D,O&FRAME.TRANS_RELATIVE?I.rotation+=S*DEG_TO_RAD_HELP:I.rotation=S*DEG_TO_RAD_HELP+o.consumer._a),I.isCamera?(I.x=I.px,I.y=I.py,O&FRAME.TRANS_ZOOM&&(D=easingFn[P.transformZoom](D),I.zoomValue=h.zoomValue+(p.zoomValue-h.zoomValue)*D),O&FRAME.TRANS_LOOK_X&&(D=easingFn[P.transformLookX](D),I.lookX=h.lookX+(p.lookX-h.lookX)*D),O&FRAME.TRANS_LOOK_X&&(D=easingFn[P.transformLookY](D),I.lookY=h.lookY+(p.lookY-h.lookY)*D),O&FRAME.TRANS_DEPTH&&(D=easingFn[P.transformDepth](D),I.depth=h.depth+(p.depth-h.depth)*D)):(O&FRAME.TRANS_SCALE_X&&(D=easingFn[P.transformScaleX](D),I.scaleX=h.scaleX+(p.scaleX-h.scaleX)*D+o.consumer._sx),O&FRAME.TRANS_SCALE_Y&&(D=easingFn[P.transformScaleY](D),I.scaleY=h.scaleY+(p.scaleY-h.scaleY)*D+o.consumer._sy),O&FRAME.TRANS_OPACITY&&(D=easingFn[P.transformOpacity](D),I.alphaValue=h.alphaValue+(p.alphaValue-h.alphaValue)*D,B=!0),O&FRAME.TRANS_BLUR&&(D=easingFn[P.transformBlur](D),I.blurValue=h.blurValue+(p.blurValue-h.blurValue)*D,B=!0),O&FRAME.TRANS_TINT&&(I.tintValueRGBA[0]=h.tintValueRGBA[0]+(p.tintValueRGBA[0]-h.tintValueRGBA[0])*D,I.tintValueRGBA[1]=h.tintValueRGBA[1]+(p.tintValueRGBA[1]-h.tintValueRGBA[1])*D,I.tintValueRGBA[2]=h.tintValueRGBA[2]+(p.tintValueRGBA[2]-h.tintValueRGBA[2])*D,B=!0),B&&I.processFilters())),I.transform&&I.transform())}0==o.consumer.hasStarted&&(1==o.consumer.hasEnded&&0==o.consumer.handleEnding?(o.consumer.handleEnding=1,I&&(I.suspended=!1),u&&u.blockEndHideObject&&I&&I.hide(),o.consumer.disposeable&&(o.type=-1e3,o.consumer.onended&&o.consumer.onended())):(o.consumer.handleEnding=0,o.consumer.hasEnded=0,o.consumer.hasStarted=1,I&&(I.suspended=!0),u&&u.blockStartShowObject&&I&&I.show&&I.show()))}else t=i;else R>=o.consumer.time&&R<o.consumer.lastActionTime+e&&(o.consumer.lastActionTime=R+e,o.consumer.disposeable&&(o.type=-1e3),this.owner.executeAction(o.consumer)),t=i}else i.data.consumer&&i.data.consumer.onDelete&&i.data.consumer.onDelete(),0<this.timeBlocks.linksCount&&(n=this.timeBlocks.deleteLink(i,t),i=t,delete n.data.consumer,delete n.data.target,delete n.next,delete n),i||(i=this.timeBlocks.head),t=i;else t=i}this.clockTime+=e}},this.clear=function(){this.owner.freeTimeBlocks.clear(),this.timeBlocks.clear(),this.newBlock(9999)},this.newBlock(9999),this}function anipartiViewer(e){var n=this;return n.events=new eventSystem,n.freeTimerCallbacks=new utils.fastList,n.timerCallbacks=new utils.fastList,n.timerCallbacks.add=function(e,t){var i=this.addLink();return i.data={interval:e,timer:n.timelineTimer,callback:t},i.data},n.onTimer=function(e,t){return this.timerCallbacks.add(e,t)},n.timeout=function(e,t){return this.timerCallbacks.add(e,t)},n.onReady=function(e){this.events("OnReady",e)},n.onRender=function(e){this.events("OnRender",e)},n}setBit(FRAME),anipartiViewer.prototype.loadContent=function(e){e&&(e=LZString.decompressFromEncodedURIComponent(e),this.realContent=JSON.parse(e),this.playProject(this.realContent))},anipartiViewer.prototype.loadContentId=function(e,t){var i=this;this.api("get_repo_public",{id:e},function(e){i.loadContent(e.data.content),t()},t)},anipartiViewer.prototype.actions={
SwitchToNextSlide:function(e,t){},
ActivateCamera:function(e,t){e.currentCamera=e.objects[t.CameraName]},ShowObject:function(e,t){e.objects[t.ObjectName].show()},BringToFront:function(e,t){var i=e.objects[t.ObjectName];i.parentNode.appendChild(i)},HideObject:function(e,t){e.objects[t.ObjectName].hide()},TogglePauseSlide:function(e,t){var i=viewer.slides[t.SlideName];i&&(i.isPaused?i.resume():i.pause())},PauseSlide:function(e,t){var i=e.viewer.slides[t.SlideName];i&&i.pause()},ResumeSlide:function(e,t){var i=e.viewer.slides[t.SlideName];i&&i.resume()},ResetSlide:function(e,t){var i=e.viewer.slides[t.SlideName];i&&i.reset()},SetClockTime:function(e,t){var i=e.viewer.slides[t.SlideName];i&&(i.timeline.clockTime=parseInt(t.ClockTime))},CallComponentFunction:function(e,t){try{e.objects[t.ObjectName][t.FunctionName](e,t)}catch(e){console.log("CallComponentFunctionError",e)}},OpenHyperlink:function(e,t){t.linkSameWindow?(window.location.href=t.Link,window.location.reload()):window.open(t.Link,"_blank","location=no")},ConditionalActions:function(slide,action){if(!action.conditionCheck)try{var s="action.conditionCheck=function(viewer,slide,action){return("+action.Condition+");}";console.log(s),eval(s)}catch(e){action.conditionCheck=function(){return!1},alert("Error in condition ["+action.Condition+"]\n"+e.message)}action.conditionCheck(viewer,slide,action)&&(console.log("condition "+action.Condition),action.ActionsList.forEach(function(e){slide.executeAction(e.action)}))},ActionsList:function(t,e){e.ActionsList.forEach(function(e){t.executeAction(e.action)})},Function:function(e,t){t.func.apply(t.obj,[])},EnableSwip:function(e,t){e.preventSwip=!1},DisableSwip:function(e,t){e.preventSwip=!0},MoveToNextSlide:function(e,t){e.readyToMoveNextSlide=!0},PlaySound:function(e,t){if(!e.viewer.disableSound){if(0<parseInt(t.Delay)&&!t.timeBlockLaunched)return t.time=e.timeline.clockTime+parseInt(t.Delay),t.lastActionTime=t.time,t.disposeable=!0,t.timeBlockLaunched=!0,t.timeBlock=e.timeline.newBlock(2,t),void console.log(t.timeBlock);if((!t.timeBlock||t.lastActionTime!=t.time)&&(t.timeBlockLaunched=!1,""!=t.SoundName)){var i=e.___soundSources;t.GlobalSoundGroup&&(i=e.viewer.___soundSources),t.SoundGroup&&""!=t.SoundGroup||(t.SoundGroup=t.uuid),console.log("action.SoundGroup",t.SoundGroup);var n=i[t.SoundGroup];n||(i[t.SoundGroup]=new e.viewer.soundManager.createSource,n=i[t.SoundGroup]),console.log("sound source",n),n.startBuffer(t.SoundName,t.Speed/50,t.Repeat),n.setVolume(t.Volume)}}},MoveToNextSlide:function(e,t){e.readyToMoveNextSlide=!0},ShowSlideNavigation:function(e,t){},AmioDataCollection:function(e,t){var i=e.viewer;if(e.viewer.content.projectSettings.enableDataCollection){var n=t.amio;!n&&t.amioName&&(n=e.objects[t.amioName].obj.amio),n&&(t.details=t.details||{},t.details.amioId=n.id,t.details.amioName=n.name,t.details.clientId=n.content.clientId,t.details.clientName=n.content.clientName,t.details.plannedPV=n.content.plannedPV),t.collectionType&&"custom"!=t.collectionType&&(t.dataKey+="-"+t.collectionType,t.dataTitle+="-"+t.collectionType);var o=e.dataKey+"!"+t.dataKey,a=new Date;if("monthly"==t.collectionFrequency?o+="!"+a.getFullYear()+"/"+a.getMonth():"daily"==t.collectionFrequency?o+="!"+a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate():"hourly"==t.collectionFrequency?o+="!"+a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate()+"/"+a.getHours():"everyTime"==t.collectionFrequency&&(o+="!"+Date.now()),!window.localStorage.getItem(o)){"everyTime"!=t.collectionFrequency&&window.localStorage.setItem(o,"true");var r={key:o,dataKey:t.dataKey,dataTitle:t.dataTitle,slideKey:e.dataKey,slideTitle:e.dataTitle,projectKey:e.viewer.content.projectSettings.dataKey,projectTitle:e.viewer.content.projectSettings.dataTitle};if(t.details)for(var s in t.details)r[s]=t.details[s];for(var s in i._ua||(i._ua={},i._ua.ua_name=i.ua.name,i._ua.ua_version=i.ua.version,i._ua.ua_product=i.ua.product,i._ua.ua_manufacturer=i.ua.manufacturer,i._ua.ua_layout=i.ua.layout,i._ua.ua_os=i.ua.os.family+" "+i.ua.os.version),i._ua.ua_ip=i.ua.clientip,i._ua.ua_geolocation=i.ua.geolocation,i._ua)r[s]=i._ua[s];if(console.log("storeData",r),e.viewer.content.projectSettings.dataCollectionUrl){r=JSON.stringify(r),r=LZString.compressToEncodedURIComponent(r);var l=new XMLHttpRequest;l.open("GET",e.viewer.content.projectSettings.dataCollectionUrl+"data="+r,!0),l.send()}}}}},anipartiViewer.prototype.buildSlide=function(t,e){var o=this;t.discoverCameras(),t.cameras.forEach(function(e){t.objects[e.uuid]=e,(t[e.title]=e).slide=t,e.px=e.x,e.py=e.y,e.timelines.forEach(function(e){e.blocks.forEach(function(e){t.loadBlock(e)})})});var i=function(n){eachItem(n.layers,function(i,e){(n[i.title]=i).pixiLayer=createDiv(),i.pixiLayer.depth=i.depth,i.pixiLayer.depthEnabled=i.depthEnabled,i.pixiLayer.depthEffect=i.depthEffect,n.objects[i.uuid]=i.pixiLayer,i.pixiLayer.bx=0,i.pixiLayer.by=0,i.pixiLayer.bsx=1,i.pixiLayer.bsy=1,i.pixiLayer.style.left=.5*n.currentCamera.cameraWidth+"px",i.pixiLayer.style.top=.5*n.currentCamera.cameraHeight+"px",n.pixiSlide.addChild(i.pixiLayer),i.slide=n,i.addObject=function(e,t,i){return e.uuid||(e.uuid=ui.guid(),this.objects.push(e)),e.anchorX=e.anchorX||"0.5",e.anchorY=e.anchorY||"0.5",e.anchorX=parseFloat(e.anchorX),e.anchorY=parseFloat(e.anchorY),"image"==e.objectType&&(e.componentId="imageLayer1.0"),e.defaultComponent=e.componentId||"default",e.layer=this,e.onTouch=function(e){this.events.onTouch||(this.events.onTouch=[]),this.events.onTouch.push({actionName:"Function",obj:this,func:e})},"textSprite1.0"==e.defaultComponent&&(e.component.enableTextWrap=!0,e.defaultComponent="smartText1.0",e.textSpriteSupport=!0),o.components[e.defaultComponent]||(e.defaultComponent="default"),o.components[e.defaultComponent](e,t,function(e,t){if(!e.pixi)return e.destroy=function(){},void(i&&i(e));e.pixi.setAttribute("id",e.uuid),e.pixi.uuid=e.uuid,e.pixi.slide=t,(e.pixi.obj=e).events.onTouch&&(e.events.onTouch.forEach(function(e){e.uuid=utils.guid()}),e.pixi.classList.add("touchable"),e.pixi.onTouch(function(e){this.slide.executeActions(this.obj.events.onTouch)})),e.filters.blur,e.pixi.processFilters=function(){this.alpha=this.alphaValue/100,this.obj.filters.blur,this.obj.filters.colorTint&&(this.tint=(this.tintValueRGBA[0]<<16)+(this.tintValueRGBA[1]<<8)+this.tintValueRGBA[2]),this.style.opacity=this.alpha},e.pixi.px=e.left,e.pixi.py=e.top,e.pixi.bx=e.pixi.px,e.pixi.by=e.pixi.py,e.pixi.blurValue=e.blurValue,e.pixi.alphaValue=e.alphaValue,e.pixi.tintValueRGBA=e.tintValueRGBA,e.pixi.rotation=e.cssAngle,e.pixi.processFilters(),e.layer.pixiLayer.addChild(e.pixi),e.pixi.scaleX=e.scaleX,e.pixi.scaleY=e.scaleY,e.pixi.rotation=e.cssAngle,e.pixi.ba=e.pixi.rotation,t.objects[e.uuid]=e.pixi,e.timelines.forEach(function(e){e.blocks.forEach(function(e){t.loadBlock(e)})}),o.events("ObjectAdded",[e.layer,e]),i&&i(e)}),e},eachItem(i.objects,function(e,t){e.title=e.title||e.name||e.uuid,i.addObject(e,i.slide,function(e){e.pixi&&(n[e.title]=e.pixi),t.call()})},function(){e.call()})},function(){n.actionTimelines.forEach(function(e){e.blocks.forEach(function(e){n.loadBlock(e)})}),!n.currentCamera&&0<n.cameras.length&&(n.currentCamera=n.cameras[0]),n.layers.forEach(function(e){e.objects.forEach(function(t){t.pixi&&(t.pixi.prepareComponent&&t.pixi.prepareComponent(),t.hideOnCreated&&t.pixi.hide(),t.pixi.scaleX=t.scaleX,t.pixi.scaleY=t.scaleY,t.pixi.bsx=t.pixi.scaleX,t.pixi.bsy=t.pixi.scaleY,t.pixi.rotation=t.cssAngle*DEG_TO_RAD_HELP,t.pixi.width=t.width,t.pixi.height=t.height,t.pixi.anchorX=t.anchorX,t.pixi.anchorY=t.anchorY,t.events.onCreated&&t.events.onCreated.forEach(function(e){e.uuid=ui.guid(),t.pixi.slide.executeAction(e)}),t.pixi.transform=function(){this.transformChanged=this.px!=this.l_px||this.py!=this.l_py||this.scaleX!=this.l_scaleX||this.scaleY!=this.l_scaleY||this.rotation!=this.l_rotation,this.transformChanged&&(this.style.transform=this.style.webkitTransform="translateX("+(this.px-this.width*this.anchorX)+"px) translateY("+(this.py-this.height*this.anchorY)+"px)  rotate("+this.rotation+"rad) scaleX("+this.scaleX+") scaleY("+this.scaleY+")  ",this.l_px=this.px,this.l_py=this.py,this.l_scaleX=this._scaleX,this.l_scaleY=this._scaleY,this.l_rotation=this.rotation)},t.pixi.style.transformOrigin=100*t.pixi.anchorX+"% "+100*t.pixi.anchorY+"%",t.pixi.transform())})}),o.events("BuildSlideFinish",[n]),e(n.pixiSlide)})};0<t.preloading.length?o.resourceLoader(t,function(){i(t)}):i(t)},anipartiViewer.prototype.loadSlide=function(t,i){this.events("SlideLoading",[t]),t.freeTimeBlocks=this.freeTimeBlocks,t.timeline=new anpartiViewerTimeline(t),this.buildSlide(t,function(e){t.loaded=!0,t.events("OnLoaded",[t]),t.pixiContainer=createDiv(),t.pixiContainer.setSize(e.actualWidth,e.actualHeight),t.donotPlaceOnStage?t.pixiContainer.style.visibility="hidden":t.viewer.pixiStage.addChild(t.pixiContainer),t.pixiContainer.style.overflow="hidden",t.pixiContainer.addChild(e),t.pixiContainer.setAttribute("id","slide_container_"+t.uuid),i&&i(t)})},anipartiViewer.prototype.renderSlide=function(e,t){t.cameraWidth,t.cameraHeight;e.pvx=(t.x+t.lookX)/t.cameraWidth*100+50,e.pvy=(t.y+t.lookY)/t.cameraHeight*100+50,e.style.transformOrigin=parseInt(e.pvx)+"% "+parseInt(e.pvy)+"%",e.px=-(t.x+t.lookX),e.py=-(t.y+t.lookY);var i=t.zoomValue/50;e.rotation=-t.rotation,e.scaleX=i,e.scaleY=i,e.style.transform="translateX("+e.px+"px) translateY("+e.py+"px) scaleX("+e.scaleX+") scaleY("+e.scaleY+") rotate("+e.rotation+"rad)"},anipartiViewer.prototype.slidesBatchLoading=function(i,n){var o=this;i.totalBatchSlidesLoaded=i.totalBatchSlidesLoaded||0,i.batchCount=1,eachItem(i.slides,function(e,t){e.donotPublishSlide||e.loaded||e.loadingStart?t.call():(e.loadingStart=!0,e.donotPlaceOnStage=n,o.loadSlide(e,function(e){if(i.slideLoaded&&i.slideLoaded(e),i.batchCount++,i.totalBatchSlidesLoaded++,i.batchCount>i.batchSize)return t.index=i.slides.length,i.batchComplete&&i.batchComplete(i),void(i.batchLoading=!1);t.call()}))},function(){i.batchLoading=!1,i.batchComplete&&i.batchComplete(i)},i.totalBatchSlidesLoaded+1)},anipartiViewer.prototype.playProject=function(e,t,i,n,o){var a=this,r={slides:[{uuid:"MainSlide",name:"mainslide.1",title:"mainslide.1",actionTimelines:[{blocks:[],name:"timeline.1",title:"slide-timeline.1"}],cameras:[{uuid:"MainCamera",noMasking:!0,lookX:0,lookY:0,zoomValue:50,cameraWidth:a.width,cameraHeight:a.height,cameraDepth:!(a.scrollingMode="smooth"),left:0,top:0,width:400,height:300,scaleX:1,scaleY:1,angle:0,originX:"center",originY:"center",alphaValue:100,blurValue:0,cssAngle:0,tintValueRGBA:[255,255,255,1],nodeLock:!1,nodeVisible:!0,title:"camera.1",name:"camera.1",nodeExpended:!0,timelines:[{blocks:[]}]}],layers:[{objects:[],nodeLock:!1,nodeVisible:!0,uuid:"MainSlideLayer",title:"layer.1",name:"layer.1",nodeExpended:!0}],timelineBlocks:[],activeCameraId:"MainCamera",preloading:[]}],runtime:e.runtime};for(var s in e)"slides"!=s&&(r[s]=e[s]);if(0<n){for(var l=i;l<e.slides.length&&l<i+n;l++)r.slides.push(e.slides[l]);o&&r.slides.push(o)}else for(l=i=0;l<e.slides.length;l++)r.slides.push(e.slides[l]);a.soundSupport=!1;for(l=0;l<r.slides.length;l++)r.slides[l].slideIndex=l,a.soundSupport||r.slides[l].preloading.forEach(function(e){e.soundBuffer&&(a.soundSupport=!0)});console.log("viewer.soundSupport",a.soundSupport),a.slideStart=i,a.soundSupport||(a.disableSound=!0),this.playContent(r,"MainSlide",{OnReady:function(a){a.MainSlide=a.content.slides[0];var r={slides:a.content.slides,batchSize:10,totalBatchSlidesLoaded:0,loadedSlides:[],currentSlideIndex:0,slideX:0,slideY:0,cameraAx:0,cameraAy:0,slideChangeEvent:document.createEvent("Events"),moveToSlide:function(e){var t=this.currentSlideIndex+e;if(t<0&&(t=0),t>this.loadedSlides.length-1&&(t=this.loadedSlides.length-1),t!=this.currentSlideIndex){var i={ObjectName:"MainCamera",Speed:50,Delay:0,Repeat:1,EffectTime:500,PosX:0,PosY:this.loadedSlides[t].ay+.5*this.loadedSlides[t].ah,Rotation:0,ScaleX:1,ScaleY:1,Relative:!1,TweenProperties:{PosX:[!1,"linear"],PosY:[!0,"linear"],ScaleX:[!1,"linear"],ScaleY:[!1,"linear"],Rotation:[!1,"linear"]}};a.actions.TweenEffect(a.MainSlide,i)}},slideLoaded:function(e){console.log("slide ",e),a.hideProcessing(),r.loadedSlides.push(e),a.MainSlide.pixiSlide.addChild(e.pixiContainer),e.pixiContainer.style.visibility="visible",e.pixiContainer.aw=1*a.MainSlide.currentCamera.cameraWidth,e.pixiContainer.px=r.slideX,e.pixiContainer.py=r.slideY,e.pixiContainer.px=r.slideX,e.pixiContainer.py=r.slideY;var t=e.pixiContainer.aw/e.currentCamera.cameraWidth;e.pixiContainer.ah=e.currentCamera.cameraHeight*t,e.ax=e.pixiContainer.px,e.ay=e.pixiContainer.py,e.ah=e.pixiContainer.ah,e.aw=e.pixiContainer.aw,r.slideY+=e.pixiContainer.ah-2,e.pixiContainer.style.transformOrigin="left top",e.pixiContainer.style.transform=e.pixiContainer.style.webkitTransform="scale("+t+")",e.pixiContainer.style.left=e.pixiContainer.px+"px",e.pixiContainer.style.top=e.pixiContainer.py+"px",a.MainSlide.pixiSlide.style.height=r.slideY+"px",a.MainSlide.pixiContainer.style.height=r.slideY+"px",1<e.slideIndex&&e.pause(),a.MainSlide.animateHandlers.push(e),a.stageScrolling=!0},batchComplete:function(e){},controlCameraView:function(e){if(a.MainSlide.currentCamera.x+=this.cameraAx,a.MainSlide.currentCamera.y+=this.cameraAy,this.cameraAy<0?(this.cameraAy+=.05,0<this.cameraAy&&(this.cameraAy=0)):0<this.cameraAy&&(this.cameraAy-=.05,this.cameraAy<0&&(this.cameraAy=0)),e.y<0&&(e.y=0,this.cameraAy=0),this.currentSlide){var t=this.loadedSlides[this.loadedSlides.length-1].ay+this.loadedSlides[this.loadedSlides.length-1].ah;t-e.cameraHeight<e.y&&(e.y=t-e.cameraHeight,this.cameraAy=0)}},loadNextBatch:function(){this.batchLoading||(console.log("loading next batch"),this.batchLoading=!0,setTimeout(function(e){a.slidesBatchLoading(e,!0)},100,this))}};(a.host=r).slideChangeEvent.initEvent("aniparti_slide_change",!1,!1),a.onTimer(100,function(){a.MainSlide.currentCamera.x;var e,t=a.MainSlide.currentCamera.y,i=(a.MainSlide.currentCamera.cameraWidth,a.MainSlide.currentCamera.cameraHeight);t=a.pixiStage.scrollTop;for(var n=0;n<r.loadedSlides.length;n++)(e=r.loadedSlides[n]).ay+e.ah<t-.5*i||e.ay>t+1.5*i?e.pixiSlide.hide():e.pixiSlide.show(),t+.5*i>e.ay&&t+.5*i<e.ay+e.ah?(r.currentSlideIndex=n,(r.currentSlide=e).justViewed(),e.resume(),r.slideChangeEvent.currentSlideIndex=r.currentSlide.slideIndex,r.slideChangeEvent.totalSlides=r.slides.length-1):e.pause();r.currentSlideIndex!=r.currentSlideIndexOld&&(window.dispatchEvent(r.slideChangeEvent),r.currentSlideIndexOld=r.currentSlideIndex,r.currentSlide&&r.currentSlide.clockTime>1e3*r.currentSlide.resetAfterSeconds&&(r.currentSlide.reset(),console.log("reset"))),r.currentSlideIndex+1<r.loadedSlides.length&&r.loadedSlides[r.currentSlideIndex+1].loaded?a.loadingIndicator.hide():r.slideChangeEvent.currentSlideIndex<r.slideChangeEvent.totalSlides&&a.loadingIndicator.show();var o=r.currentSlideIndex+r.batchSize;return o>r.slides.length-1&&(o=r.slides.length-1),r.slides[o].loaded||r.loadNextBatch(),!(a.stageScrolling=!1)}),a.MainSlide.onLoad(function(){r.loadNextBatch(),a.pause(),console.log("viewer pause"),a.showCoverPage(function(){a.resume()}),a.showProcessing()}),a.events("OnStageScroll",function(e){a.stageScrolling=!0})}})},anipartiViewer.prototype.playContent=function(content,entrySlide,callbacks){console.log("content",content);var viewer=this;for(var e in viewer.defaultTimeline||(viewer.defaultTimeline=new anpartiViewerTimeline(viewer),viewer.freeTimerCallbacks=new utils.fastList),viewer.content=content,viewer.slides={},viewer.timelineTimer=0,viewer.animationSpeed=1,viewer.blankGif="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",viewer.components={default:function(e,t,i){i(e,t)},"imageLayer1.0":function(e,t,i){e.pixi=createDiv("img"),e.pixi.src=viewer.blankGif,e.pixi.width=e.width,e.pixi.height=e.height,0==e.imageUrl.indexOf("blob:")?e.pixi.src=e.imageUrl:e.pixi.src=viewer.resourceUrl+e.imageUrl,i(e,t),e.pixi.setSize(e.width,e.height)}},viewer.ua=viewer.ua||platform,navigator.geolocation||console.log("navigator.geolocation not working"),content.projectSettings&&content.projectSettings.textDictionary&&(aniparti.currentTextDictionary||(aniparti.currentTextDictionary=aniparti.compileTextDictionary(content.projectSettings.textDictionary,content.projectSettings.viewerLanguage))),viewer.globalEffects=content.loadedEffects,viewer.instantEffects=content.instantEffects,content.instantEffects){var effect=content.instantEffects[e];effect._frames=[],effect.frames.forEach(function(e){e.curvePoint.time=e.time,e.curvePoint.easing=e.curvePoint.easingFunctions,e.curvePoint.rotation=e.curvePoint.cssAngle,delete e.curvePoint.easingFunctions,e=e.curvePoint,effect._frames.push(e)}),effect.mask=FRAME.getMask(effect),effect.frames=effect._frames,viewer.instantEffects[effect.title]=effect}for(var c in viewer.preloadingTasks=viewer.preloadingTasks||[],viewer.plugins={},content.components)eval("viewer.components[c] ="+content.components[c]);if(viewer.components["amioImage1.0"]=aniparti.components["amioImage1.0"].runComponent,viewer.components["smartText1.0"]=aniparti.components["smartText1.0"].runComponent,viewer.components["spriteSheet1.0"]=aniparti.components["spriteSheet1.0"].runComponent,viewer.content.publishedFromServer&&(viewer.serverUrl="http://"+viewer.content.publishedFromServer),content.plugins)for(var p in content.plugins)eval("viewer.plugins[p]="+content.plugins[p]),viewer.plugins[p](viewer);aniparti.components["amioImage1.0"].plugin(viewer),viewer.showProcessing(),viewer.content.slides.forEach(function(o){viewer.slides[o.uuid]=o,(viewer[o.title]=o).clockTime=0,o.objects={},o.viewer=viewer,o.___soundSources={},o.animateHandlers=[],o.events=new eventSystem,o.justViewed=function(){this.justViewedOk||this.viewer.isPaused||(this.layers.forEach(function(e){e.objects.forEach(function(t){t.pixi&&(t.pixi.onViewed&&t.pixi.onViewed(),t.events.onViewed&&t.events.onViewed.forEach(function(e){e.uuid=ui.guid(),t.pixi.slide.executeAction(e)}))})}),this.justViewedOk=!0)},o.onLoad=function(e){this.events("OnLoaded",e)},o.beforeLoading=function(e){this.events("BeforeLoading",e)},o.discoverCameras=function(){var t=this;t.pixiSlide||(t.pixiSlide=createDiv(),t.cameras.forEach(function(e){e.isCamera=!0,e.x=e.left,e.y=e.top,e.bx=e.x,e.by=e.y,e._width=e.cameraWidth,e._height=e.cameraHeight,e.scale={x:1,y:1},t.currentCamera||(t.currentCamera=e),t.activeCameraId==e.uuid&&(t.currentCamera=e),e.rotation=e.cssAngle}),t.pixiSlide.actualWidth=t.currentCamera.cameraWidth,t.pixiSlide.actualHeight=t.currentCamera.cameraHeight,t.pixiSlide.setSize(t.currentCamera.cameraWidth,t.currentCamera.cameraHeight))},o.pause=function(){this.isPaused||(this.isPaused=!0,this.pauseAllSounds())},o.resume=function(){this.isPaused&&(this.isPaused=!1,this.resumeAllSounds())},o.executeAction=function(e){console.log("executeAction",e),this.viewer.actions[e.actionName](this,e)},o.executeActions=function(e){for(var t=0;t<e.length;t++)this.viewer.actions[e[t].actionName](this,e[t])},o.reset=function(){for(var e in this.timeline.clockTime=0,this.isPaused=!1,this.stopAllSounds(),this.objects){var t=this.objects[e].obj;t&&t.hideOnCreated&&t.pixi.hide()}},o.stopAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].stopBuffer();for(var t=0;t<this.animateHandlers.length;t++)o.animateHandlers[t].stopAllSounds&&o.animateHandlers[t].stopAllSounds()},o.pauseAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].pauseBuffer();for(var t=0;t<this.animateHandlers.length;t++)o.animateHandlers[t].pauseAllSounds&&o.animateHandlers[t].pauseAllSounds()},o.resumeAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].resumeBuffer();for(var t=0;t<this.animateHandlers.length;t++)o.animateHandlers[t].resumeAllSounds&&o.animateHandlers[t].resumeAllSounds()},o.loadBlock=function(e){if(e.actionBlock){if(e.actionBlock)if("TimeTick"==e.actionData.actionName)this.timeline.newBlock(100,{repeat:e.actionData.repeat<1?1e7:e.actionData.repeat,time:e.time,data:e.actionData,timeWidth:e.timeWidth,_x:0,_y:0,_sx:0,_sy:0,_a:0,active:e.active,hasStarted:0,hasEnded:0,handleEnding:0},this.objects[e.ani]);else{var t=e.actionData;t.uuid=t.uuid||utils.guid(),t.disposeable=!0,t.time=e.time,t.lastActionTime=e.time+5e3;this.timeline.newBlock(2,t)}}else{var i={frames:[]};e.frames.forEach(function(e){e.curvePoint.time=e.time,e.curvePoint.easing=e.curvePoint.easingFunctions,e.curvePoint.rotation=e.curvePoint.cssAngle,delete e.curvePoint.easingFunctions,e=e.curvePoint,i.frames.push(e)}),i.timeWidth=e.timeWidth,i.time=e.time,i.blockStartShowObject=e.blockStartShowObject,i.blockEndHideObject=e.blockEndHideObject;this.timeline.newBlock(300,{effect:i,mask:FRAME.getMask(e),effectSpeed:1,repeat:e.repeat<1?1e7:e.repeat,time:e.time,_x:0,_y:0,_sx:0,_sy:0,_a:0,active:e.active,hasStarted:0,hasEnded:0,handleEnding:0},this.objects[e.ani])}},o.animate=function(e){if(!this.isPaused){this.timeline.animate(e),this.viewer.renderSlide(this.pixiSlide,this.currentCamera);for(var t=0;t<this.animateHandlers.length;t++)this.animateHandlers[t].animate(e);for(var i=o.timerCallbacks.head,n=null;null!=i;){if(i.data&&o.clockTime-i.data.timer>i.data.interval){if(!i.data.callback(i.data)){o.timerCallbacks.deleteLink(i,n),delete i.data,i=i.next;continue}i.data.timer=o.clockTime}i=(n=i).next}}},o.render=function(){},o.timerCallbacks=new utils.fastList,o.timerCallbacks.add=function(e,t){var i=this.addLink();return i.data={interval:e,timer:this.clockTime||0,callback:t},i.data},o.onTimer=function(e,t){return this.timerCallbacks.add(e,t)},callbacks.onProcessSlide&&callbacks.onProcessSlide(o)}),callbacks.OnReady&&callbacks.OnReady(viewer),entrySlide||(entrySlide=viewer.content.slides[0].uuid),eachItem(viewer.preloadingTasks,function(e,t){e(viewer,function(){t.call()})},function(){viewer.gotoSlide(entrySlide),viewer.events("OnReady"),viewer.play()})},anipartiViewer.prototype.gotoSlide=function(e){var t=this.slides[e];(this.currentSlide=t).loaded||this.loadSlide(t)},anipartiViewer.prototype.showCoverPage=function(t){var i=this;if(i.soundManager&&i.soundSupport){var n=createDiv();n.style.right="0",n.style.bottom="0",n.classList.add("touchable"),n.innerHTML='<div class="showAnipartiTouch" style="position:absolute;left:0;top:0;right:0;bottom:0;background-color:#af0000;"><img src="'+this.resourceUrl+'/logo-aniparti-white.png" style="position:absolute;left:50%;top:50%;margin-left:-100px;margin-top:-122px" width="200" /><h3 style="text-align:center;left:0;right:0; top:50%;position:absolute;margin-top:140px;line-height:40px;color:white"><< Click to play >> <br/><< 点击 >>  </h3></div>',i.element.appendChild(n),n.onclick=function(){i.soundManager.handleIOS()&&i.events("IOSHandle"),t(),n.remove()},n.addEventListener("touchend",function(e){i.soundManager.handleIOS()&&i.events("IOSHandle"),t(),n.remove()})}else t()},anipartiViewer.prototype.play=function(){var o=this;o.rateControlTimer=0,o.timelineTimer=Date.now(),o.timelinePlaying||(o.timelinePlaying=!0,o.onTimelinePlaying=function(){var e=Date.now(),t=e-o.timelineTimer;if(o.timeDelta=0,!o.isPaused){o.timeDelta=t*o.animationSpeed,o.currentSlide&&o.currentSlide.pixiSlide&&o.currentSlide.animate(t*o.animationSpeed);for(var i=o.timerCallbacks.head,n=null;null!=i;){if(i.data&&e-i.data.timer>i.data.interval){if(!i.data.callback(i.data)){o.timerCallbacks.deleteLink(i,n),delete i.data,i=i.next;continue}i.data.timer=e}i=(n=i).next}o.defaultTimeline.animate(t*o.animationSpeed)}o.currentSlide.render(),o.timelineTimer=e,o.timelinePlaying&&requestAnimationFrame(o.onTimelinePlaying),o.events("OnRender")},o.timelinePlaying&&o.onTimelinePlaying())},anipartiViewer.prototype.stop=function(){this.timelinePlaying=!1},anipartiViewer.prototype.pause=function(){this.isPaused=!0},anipartiViewer.prototype.resume=function(){this.isPaused=!1,this.currentSlide&&this.currentSlide.resume(),this.resumeAllSounds()},anipartiViewer.prototype.stopAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].stopBuffer()},anipartiViewer.prototype.pauseAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].pauseBuffer()},anipartiViewer.prototype.resumeAllSounds=function(){for(var e in this.___soundSources)this.___soundSources[e].resumeBuffer()},anipartiViewer.prototype.resourceLoader=function(t,e){var n=this;if(n.loadSlideResourcesDone=e,t.preloading.length<1)n.loadSlideResourcesDone(t);else{var i=[];if(n.disableSound||t.preloading.forEach(function(e){e.soundBuffer&&i.push(e)}),n.loadingSoundsCount=i.length,n.totalProgress=n.loadingSoundsCount,console.log("Loading Done: "+t.title),0!=n.totalProgress){n.slideNavigationDisplay=n.slideNavigationDisplay||function(e,t,i){var n=i/t;this.loadingIndicator.text.innerHTML=parseInt(100*n)+"%"};var o=function(e){n.slideNavigationDisplay(t,n.totalProgress,n.totalProgress-n.loadingSoundsCount),n.loadingSoundsCount<=0&&(console.log("Loading Done: "+t.title,e),setTimeout(function(){n.loadSlideResourcesDone(t)},100))};eachItem(i,function(t,i){if(t.soundBuffer){if(""==t.soundBuffer)return n.loadingSoundsCount--,void i.callNext();console.log("item.soundBuffer",t.soundBuffer),n.soundManager.loadBuffer(t.soundBuffer,function(e){n.loadingSoundsCount--,console.log("sound loaded---"+t.soundBuffer),o("sounds completed"),setTimeout(function(e){e.callNext()},500,i)},function(){console.log("sound failed--11---"+t.soundBuffer),n.loadingSoundsCount--,o("sounds completed"),i.callNext()},n.resourceUrl)}},function(){})}else n.loadSlideResourcesDone(t)}},window.makeAnipartiViewer=function(e,t){var i="http://"+document.location.hostname;console.log("domainName",i);var n=t.resourceUrl||i,o=t.serverUrl||i;e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="visible",e.viewer=new anipartiViewer,e.viewer.width=e.clientWidth,e.viewer.height=e.clientHeight,(e.viewer.element=e).viewer.pixiStage=createDiv(),e.classList.add("aniparti-viewer"),e.viewer.pixiStage.setSize(e.viewer.width,e.viewer.height),e.viewer.pixiStage.classList.add("aniparti-viewer-stage"),e.viewer.resourceUrl=n,e.viewer.pixiStage.addEventListener("scroll",function(e){a.events("OnStageScroll",[e])}),e.viewer.serverUrl=o,e.viewer.api=function(e,t,i,n,o){var a={url:this.serverUrl+"/aniparti/"+e,method:"POST",data:t,dataType:"json",success:function(e){i(e)},error:function(e){n?n(e.responseJSON):console.error(e)}};o&&(a.contentType=!1,a.processData=!1,delete a.dataType);var r=new XMLHttpRequest;r.open(a.method,a.url,!0),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){a.success(JSON.parse(this.response))},r.onerror=a.error,r.send(JSON.stringify(t))},e.appendChild(e.viewer.pixiStage),e.viewer.loadingIndicator=createDiv(),e.viewer.loadingIndicator.classList.add("spinner"),e.viewer.loadingIndicator.classList.add("loading-indicator"),e.viewer.loadingIndicator.style.top="auto",e.viewer.loadingIndicator.style.left="50%",e.viewer.loadingIndicator.style.bottom="10px",e.viewer.loadingIndicator.text=document.createElement("span"),e.viewer.loadingIndicator.appendChild(e.viewer.loadingIndicator.text),e.viewer.loadingIndicator.text.innerHTML="100%",e.appendChild(e.viewer.loadingIndicator);var a=e.viewer;return a.showProcessing=function(){window.aniparti_showProcessing(this.element)},a.hideProcessing=function(){window.aniparti_hideProcessing(this.element)},a.soundManager=t.soundManager||!!aniparti.soundManager&&new aniparti.soundManager,a.soundManager&&(a.soundManager.baseUrl=n),console.log("viewer",a),a.swipEvents=function(e){var t=Date.now()-a.touchStartTime,i=Math.abs(Math.sqrt(a.mouseDownDX*a.mouseDownDX+a.mouseDownDY*a.mouseDownDY));if(t<300&&5<t&&0<i){var n=Math.atan2(a.mouseDownDY,a.mouseDownDX);n<0&&(n+=2*Math.PI),210<(n=parseInt(n*RAD_TO_DEG_HELP))&&n<300?a.events("PointerSwipUp",[a.mouseDownDX,a.mouseDownDY]):80<n&&n<110?a.events("PointerSwipDown",[a.mouseDownDX,a.mouseDownDY]):140<n&&n<200?a.events("PointerSwipLeft",[a.mouseDownDX,a.mouseDownDY]):(300<n&&n<360||-1<n&&n<40)&&a.events("PointerSwipRight",[a.mouseDownDX,a.mouseDownDY])}else i<10&&a.events("PointerTap",[e,a.mouseDownX,a.mouseDownY])},e.addEventListener("touchstart",function(e){if(a.lastTouchCount=e.touches.length,1==e.touches.length){var t=utils.fixTouchPos(e.touches[0]);a.mouseDownDX=0,a.mouseDownDY=0,a.mouseDownX=t.xx,a.mouseDownY=t.yy,a.touchStartTime=Date.now(),a.pointerDraging=!1,a.events("OnMouseDown",[e])}}),e.addEventListener("touchend",function(e){1==a.lastTouchCount&&(a.swipEvents(e),e.preventDefault(),e.stopPropagation(),a.events("OnMouseUp",[e]))}),e.addEventListener("mouseup",function(e){a.swipEvents(e),e.preventDefault(),e.stopPropagation(),a.events("OnMouseUp",[e])}),e.addEventListener("touchmove",function(e){if(1==e.touches.length){var t=utils.fixTouchPos(e.touches[0]);a.mouseDownDX=t.xx-a.mouseDownX,a.mouseDownDY=t.yy-a.mouseDownY,a.mouseDownX=t.xx,a.mouseDownY=t.yy,(10<Math.abs(a.mouseDownDX)||10<Math.abs(a.mouseDownDY))&&(a.pointerDraging=!0),a.events("PointerDrage",[a.mouseDownDX,a.mouseDownDY]),a.events("OnMouseMove",[e])}}),e.addEventListener("mousedown",function(e){if(0<e.buttons){var t=utils.fixTouchPos(e);a.mouseDownDX=0,a.mouseDownDY=0,a.mouseDownX=t.xx,a.mouseDownY=t.yy,a.touchStartTime=Date.now(),a.pointerDraging=!1,a.events("OnMouseDown",[e])}}),e.addEventListener("mousemove",function(e){if(0<e.buttons){var t=utils.fixTouchPos(e);a.mouseDownDX=t.xx-a.mouseDownX,a.mouseDownDY=t.yy-a.mouseDownY,a.mouseDownX=t.xx,a.mouseDownY=t.yy,(10<Math.abs(a.mouseDownDX)||10<Math.abs(a.mouseDownDY))&&(a.pointerDraging=!0),a.events("PointerDrage",[a.mouseDownDX,a.mouseDownDY]),a.events("OnMouseMove",[e])}}),e.addEventListener("mousewheel",function(e){var t=e.detail?-120*e.detail:e.wheelDelta;a.events("PointerDrage",[a.mouseDownDX,.1*t,!0])}),e},aniparti.components.define({uuid:"amioImage1.0",plugin:function(i){i.loadAMIOInstanceImage=new Image,i.loadAMIOInstance=function(t,e){var i=this;if(this.loadedAmios[t.id])e&&e();else{t.clients=[],(this.loadedAmios[t.id]=t).enabledLinkedImages=[],t.content.linkedImages.forEach(function(e){e.enabled&&t.enabledLinkedImages.push(e)}),t.currentLinkedImageIndex=0,t.lastRotateTime=Date.now(),t.content.rotation_time=parseInt(t.content.rotation_time),t.rotateLinkedImage=function(){var e=this;e.currentLinkedImageIndex<e.enabledLinkedImages.length-1?e.currentLinkedImageIndex++:e.currentLinkedImageIndex=0;var t=i.serverUrl+e.enabledLinkedImages[e.currentLinkedImageIndex].imageUrl;e.linkedImageTexture=t,e.clients.forEach(function(e){e.src=t})},t.getLinkedImageTexture=function(){return this.linkedImageTexture},i.loadAMIOInstanceImage.onload=function(){t.linkedImageTexture=this.src,e&&e()};var n=i.serverUrl+t.enabledLinkedImages[t.currentLinkedImageIndex].imageUrl;i.loadAMIOInstanceImage.src=n}},i.getAmio=function(e){return this.loadedAmios[e]},i.loadedAmios={},i.events("OnReady",function(){i.onTimer(1e3,function(){if(!i.disableAMIO)for(var e in i.loadedAmios){var t=i.loadedAmios[e];if(!t.content.disableAmio&&"time"==t.content.rotation_type)(i.timelineTimer-t.lastRotateTime)/1e3>parseInt(t.content.rotation_time)&&(t.rotateLinkedImage(),t.lastRotateTime=i.timelineTimer)}return!0})}),i.actions.RotateAMIOImage=function(e,t){e.objects[t.amioImageName].obj.amio.rotateLinkedImage()}},runComponent:function(t,i,n){t.pixi=createDiv("img"),i.viewer.disableAMIO&&t.pixi.hide();var o=function(){var e=i.viewer.getAmio(t.component.amioId);e.clients.push(t.pixi),t.amio=e,t.pixi.src=e.getLinkedImageTexture(),("touch"==e.content.rotation_type||i.viewer.content.projectSettings.enableDataCollection)&&t.onTouch(function(){"touch"==this.amio.content.rotation_type&&this.amio.rotateLinkedImage(),this.pixi.slide.executeAction({actionName:"AmioDataCollection",collectionFrequency:this.amio.content.clickFrequency||"once",amio:this.amio,dataKey:this.uuid,dataTitle:this.title,collectionType:"click"})}),i.onTimer(500,function(e){return e.obj.viewer.disableAMIO||e.obj.amio.content.disableAmio?e.obj.pixi.hide():e.obj.pixi.show(),!0}).obj=t,n(t,i),t.viewer=i.viewer,t.viewer.disableAMIO||t.amio.content.disableAmio?t.pixi.hide():t.pixi.show(),t.pixi.onViewed=function(){this.slide.executeAction({actionName:"AmioDataCollection",collectionFrequency:this.obj.amio.content.viewFrequency||"once",amio:this.obj.amio,dataKey:this.obj.uuid,dataTitle:this.obj.title,collectionType:"view"})}};i.viewer.loadedAmios[t.component.amioId]?o():i.viewer.api("get_repo_public",{id:t.component.amioId},function(e){e.clientip&&(i.viewer.ua.clientip=e.clientip),e=e.data,console.log("amio",e),e.content=JSON.parse(LZString.decompressFromEncodedURIComponent(e.content)),i.viewer.loadAMIOInstance(e,function(){setTimeout(function(){o()},100)})})}}),aniparti.components.define({uuid:"smartText1.0",runComponent:function(e,i,t){e.pixi=createDiv(),e.pixiText=createDiv("div"),e.pixi.classList.add("objPixi"),e.component.backColorRGBA=e.component.backColorRGBA||"rgba(0,0,0,0)","Arial"==e.component.fontFamily&&(e.component.fontFamily="Trebuchet MS"),e.pixi.addChild(e.pixiText),e.textSpriteSupport&&(e.component.enableTextWrap=!0,e.component.textWrapWidth=parseInt(e.component.wordWrapWidth)-parseInt(e.component.fontSize),e.component.textLineHeight=1.2*parseInt(e.component.fontSize)),e.pixiText.style.fontSize=e.component.fontSize+"px",e.pixiText.style.fontFamily=e.component.fontFamily,e.pixiText.style.textAlign=e.component.align,e.pixiText.style.lineHeight=e.component.textLineHeight+"px",e.pixiText.style.color=e.component.fontColorRGB,e.pixiText.style.position="relative",e.pixiText.style.width=e.component.textWrapWidth+"px",e.updateText=function(){if(this.component.textBubble&&""!=this.component.textBubble){var e=i.viewer.resourceUrl+this.component.textBubble;if(this.textBubblePixi||(this.textBubblePixi=createDiv("img"),this.pixi.addChild(this.textBubblePixi),this.pixi.addChild(this.pixiText)),this.textBubblePixi){var t=parseInt(this.component.textBubbleScale)/50*1;this.textBubblePixi.scaleX=t,this.textBubblePixi.scaleY=t,this.textBubblePixi.rotation=parseInt(this.component.textBubbleRotate)*DEG_TO_RAD_HELP,this.textBubblePixi.px=parseFloat(this.component._textBubblePosLeft),this.textBubblePixi.py=parseFloat(this.component._textBubblePosTop),this.textSpriteSupport&&(this.textBubblePixi.anchorX=-parseFloat(this.component.textBubblePosLeft)/100,this.textBubblePixi.anchorY=-parseFloat(this.component.textBubblePosTop)/100,this.textBubblePixi.px=0,this.textBubblePixi.py=0),this.textBubblePixi.onload=function(){var e=this.width*this.scaleX,t=this.height*this.scaleY;this.px=this.width*this.scaleX*.5,this.py=this.height*this.scaleY*.5;var i=this.px-this.width*this.anchorX,n=this.py-this.height*this.anchorY;this.style.transformOrigin="50% 50%";this.scaleX,this.scaleY,this.rotation;i=-.5*e*this.anchorX,n=-.5*t*this.anchorY,this.style.left=i+"px",this.style.top=n+"px",this.style.width=e+"px",this.style.height=t+"px",this.scaleX,this.scaleY,this.rotation}}this.textBubblePixi.src=e}this.pixiText.innerHTML=this.component.text,setTimeout(function(e){var t="translateX("+(e.pixi.px-e.pixi.width*e.pixi.anchorX)+"px) translateY("+(e.pixi.py-e.pixi.height*e.pixi.anchorY)+"px) rotate("+e.pixi.rotation+"rad)  scaleX("+e.pixi.scaleX+") scaleY("+e.pixi.scaleY+")  ";e.pixi.setSize(e.width,e.height),e.pixi.style.transform=e.pixi.style.webkitTransform=t},100,this)},""!=e.component.textId&&(e.component.text=aniparti.currentTextDictionary.get(e.component.textId)),i.events("OnReset",function(){""!=e.component.textId&&(e.pixiText.text=aniparti.currentTextDictionary.get(e.component.textId),e.pixiText.updateText())}),e.updateText(),t(e,i)}}),aniparti.components.define({uuid:"spriteSheet1.0",runComponent:function(t,i,n){t.pixi=createDiv(),t.pixi.timeTick=function(e,t,i,n,o){if(this.frames&&(e.data.setName!=this.setName&&(this.setName=e.data.setName,this.effectSet=this.sheet[this.setName],this.frameIndex=0),this.effectSet)){var a=(i-n)/o;if(!(1<a)){var r=Math.round((this.effectSet.length-1)*a);this.frameIndex!=r&&(this.frames[this.frameIndex].style.display="none",this.frames[r].style.display="block",this.frameIndex=r)}}},t.pixi.sheet=i.viewer.content.spriteSheets[t.component.sheetName],t.pixi.sheet.finalImageUrl=i.viewer.resourceUrl+t.pixi.sheet.imageUrl,t.pixi.style.width=t.pixi.sheet.cellWidth+"px",t.pixi.style.height=t.pixi.sheet.cellHeight+"px",t.pixi.style.overflow="hidden",t.pixi.frameIndex=0,t.pixi.sheet.frames?(t.pixi.sheet.appendFrames(t.pixi),n(t,i)):(i.viewer.sheetCanvas||(i.viewer.sheetCanvas=document.createElement("canvas"),i.viewer.sheetCanvas.ctx=i.viewer.sheetCanvas.getContext("2d"),i.viewer.sheetCanvas.img=new Image,i.viewer.sheetCanvas.prepareFrames=function(i,n){i.frames=[],this.width=i.cellWidth,this.height=i.cellHeight,(this.img.canv=this).img.sheet=i,this.img.onload=function(){for(var e=0;e<i.cols;e++){var t=e*this.canv.width;this.canv.ctx.clearRect(0,0,this.canv.width,this.canv.height),this.canv.ctx.drawImage(this,-t,0,this.width,this.height),this.sheet.frames[e]=this.canv.toDataURL("image/png")}i.appendFrames=function(n){n.frames=[],this.frames.forEach(function(e,t){var i=new Image;i.src=e,i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.display="none",n.frames[t]=i,n.appendChild(i)})},n(i)},this.img.setAttribute("crossorigin","anonymous"),this.img.src=i.finalImageUrl}),i.viewer.sheetCanvas.prepareFrames(t.pixi.sheet,function(e){e.appendFrames(t.pixi),n(t,i)}))}}),aniparti.compileTextDictionary=function(e,t){t=t||"en";for(var i={languages:{}},n=0;n<e.data.length;n++)for(var o=e.data[n],a=o[0],r=1;r<o.length;r++){var s=e.colHeaders[r];i.languages[s]||(i.languages[s]={}),i.languages[s][a]=o[r]}return i.currentLanguage=i.languages[t],i.get=function(e){return this.currentLanguage[e]},i.getText=function(e,t){return this.languages[t][e]},i}}(window);